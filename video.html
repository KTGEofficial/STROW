<html>
<head>
    <title>Watching STROW</title><style>
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* Prevent scrolling on <html> */
            background: linear-gradient(to bottom left, hsl(180, 96%, 96%), hsl(150, 96%, 96%));
            font-family: sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow-y: auto; /* ? Enable vertical scroll on body only */
            overflow-x: hidden; /* Prevent horizontal scroll */
            position: relative;
            z-index: 1; /* Ensure body content is above the grid */
        }

        .grid-overlay {
            position: fixed; /* Stays in place while scrolling */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(to right, rgba(255, 255, 255, 0.5) 8px, transparent 1px), linear-gradient(to bottom, rgba(255, 255, 255, 0.5) 8px, transparent 1px);
            background-size: 40px 40px;
            pointer-events: none; /* ? Allows interaction with content and scrollbar */
            z-index: 0; /* Behind all content */
        }

        input[type="text"],
        input[type="url"] {
            background-color: white;
            border: 3px solid transparent;
            border-radius: 1rem;
            padding: 0.6rem 1rem;
            font-size: 1rem;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            outline: none;
            /* Gradient border using background-clip */
            background-image: linear-gradient(to bottom left, #00FFFF, #00FF7F), white;
            background-origin: border-box;
            background-clip: padding-box, border-box;
            transition: all 0.3s ease;
        }

        input[type="text"],
        input[type="url"] {
            background-color: white;
            border: 3px solid transparent;
            border-radius: 1rem;
            padding: 0.6rem 1rem;
            font-size: 1rem;
            border-radius: 1rem;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            outline: none;
            /* Gradient border using background-clip */
            background-image: linear-gradient(to bottom left, #00FFFF, #00FF7F), white;
            background-origin: border-box;
            background-clip: padding-box, border-box;
            /* Green glow when not focused */
            box-shadow: 0 0 8px rgba(0, 255, 127, 0.4);
            transition: box-shadow 0.3s ease;
        }

            /* Optional: subtle cyan glow on focus */
            input[type="text"]:focus,
            input[type="url"]:focus {
                box-shadow: 0 0 8px rgba(0, 255, 255, 0.5);
            }
.button-link,
.button-link:focus,
.button-link:active {
  outline: none;
  border: none;
}

        .button-link {
            position: relative;
            display: inline-block;
            text-decoration: none;
            color: white;
            font-size: 1rem;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 1rem;
            background-image: linear-gradient(to bottom left, #00FFFF, #00FF7F); /* Gradient restored */
            box-shadow: 0 4px 8px rgba(0, 255, 127, 0.3);
            cursor: pointer;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            z-index: 1;
        }


            .button-link:hover {
                transform: scale(1.05);
                box-shadow: 0 6px 12px rgba(0, 255, 255, 0.4);
            }

            .button-link:active {
                transform: scale(0.98);
                box-shadow: 0 2px 6px rgba(0, 255, 255, 0.2);
            }

        .ripple-outline {
            position: absolute;
            border: 2px solid rgba(0, 255, 255, 0.4); /* Soft green glow */
            border-radius: 1rem;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            transform: scale(1);
            animation: ripple-outline-animation 800ms ease-out;
            pointer-events: none;
            z-index: 0; /* Behind the button text 2:06:58:53 */

        }


        @keyframes ripple-outline-animation {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }

            100% {
                transform: scale(2.5);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="grid-overlay"></div>

<div style="position: relative; height: 100vh; background-color: hsl(0deg 0% 100% / 0%); padding: 2rem;">
  <iframe
    id="videoPreview"
    src=""
    frameborder="0"
    allowfullscreen
    style="width: 840px; height: 472.5px;">
  </iframe>

  <h1 id="videoTitle">Loading Title</h1>

  <h2 id="countdown">Waiting for deadline</h2>

  <p id="videoDescription">Loading description</p>

  <h4 id="videoAuthor">From undefined at undefined</h4>

  <p id="videoDeadline">Deadline: Loading</p>

  <a id="spreadsheetLink" class="button-link">Spreadsheet</a>
  <a id="externalLink" class="button-link">Alternate External</a>

  <h2 id="commentCount">0 Comments</h2>
</div>
<script>
  async function getRawFingerprintData() {
    const traits = [
      navigator.userAgent,
      navigator.language,
      screen.width,
      screen.height,
      screen.colorDepth,
      new Date().getTimezoneOffset(),
      navigator.platform,
      navigator.hardwareConcurrency,
      navigator.deviceMemory || 'unknown',
    ];
    return traits.join('::');
  }

  async function generateHexFingerprint(rawData) {
    const encoder = new TextEncoder();
    const buffer = await crypto.subtle.digest('SHA-256', encoder.encode(rawData));
    return Array.from(new Uint8Array(buffer))
      .map(b => b.toString(16).padStart(2, '0'))
      .join('');
  }

  async function loadVideoData() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (!id) {
      window.location.href = "https://ktgeofficial.github.io/STROW/";
      return;
    }

    const rawData = await getRawFingerprintData();
    const fingerprint = await generateHexFingerprint(rawData);

    const query = new URLSearchParams({
      mode: "watch",
      id,
      fingerprint
    }).toString();

    const response = await fetch(`https://script.google.com/macros/s/AKfycbzYUUuLDm96rK8PlXpNGxAbnz7Aj_vomdYUtXs6jonxgpqSDFBX162Ya2dA1GnYJzdh/exec?${query}`);
    const html = await response.json();

    const script = document.createElement("script");
    script.innerHTML = html;
    document.body.appendChild(script);
  }

  loadVideoData();
</script>

</body>
</html>








